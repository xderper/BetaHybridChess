"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(user)/game/page",{

/***/ "(app-pages-browser)/./src/app/(user)/game/page.tsx":
/*!**************************************!*\
  !*** ./src/app/(user)/game/page.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Game; },\n/* harmony export */   dynamic: function() { return /* binding */ dynamic; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var chess_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chess.js */ \"(app-pages-browser)/./node_modules/chess.js/dist/esm/chess.js\");\n/* harmony import */ var _lib_socket__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/socket */ \"(app-pages-browser)/./src/lib/socket.ts\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _game_module_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./game.module.css */ \"(app-pages-browser)/./src/app/(user)/game/game.module.css\");\n/* harmony import */ var _game_module_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_game_module_css__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dynamic */ \"(app-pages-browser)/./node_modules/next/dist/api/app-dynamic.js\");\n/* __next_internal_client_entry_do_not_use__ dynamic,default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Import the Chessboard component with no SSR\nconst Chessboard = (0,next_dynamic__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_react-chessboard_dist_index_esm_js\").then(__webpack_require__.bind(__webpack_require__, /*! react-chessboard */ \"(app-pages-browser)/./node_modules/react-chessboard/dist/index.esm.js\")).then((mod)=>{\n        const { Chessboard } = mod;\n        return Chessboard;\n    }), {\n    ssr: false,\n    loading: ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().loadingBoard),\n            children: \"Loading Chess Board...\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 19,\n            columnNumber: 7\n        }, undefined)\n});\n_c = Chessboard;\n// Prevent static generation for this page\nconst dynamic = \"force-dynamic\";\n// GameContent component that uses useSearchParams\nfunction GameContent() {\n    _s();\n    const [game, setGame] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess());\n    // const [playerColor, setPlayerColor] = useState<'white' | 'black'>('white');\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [pendingMove, setPendingMove] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams)();\n    const roomId = searchParams.get(\"roomId\");\n    const playerColor = searchParams.get(\"color\");\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!roomId) return;\n        // Get the existing socket connection\n        const socket = (0,_lib_socket__WEBPACK_IMPORTED_MODULE_3__.connectSocket)();\n        socketRef.current = socket;\n        // Remove any existing listeners\n        socket.removeAllListeners();\n        // Handle connection events\n        socket.on(\"connect\", ()=>{\n            console.log(\"Connected to game socket\");\n            socket.emit(\"join_game_room\", roomId);\n            console.log(\"Joining game room:\", roomId);\n        });\n        socket.on(\"disconnect\", ()=>{\n            console.log(\"Disconnected from game socket\");\n            setStatus(\"Disconnected. Reconnecting...\");\n        });\n        socket.on(\"connect_error\", (error)=>{\n            console.error(\"Connection error:\", error);\n            setStatus(\"Connection error. Retrying...\");\n        });\n        // Listen for player color assignment\n        // socket.on('player_color', (color: 'white' | 'black') => {\n        //   console.log('Received player color:', color);\n        //   setPlayerColor(color);\n        // });\n        // Listen for game status updates\n        socket.on(\"game_status\", (param)=>{\n            let { status, white, black } = param;\n            console.log(\"Game status update:\", {\n                status,\n                white,\n                black\n            });\n            if (status === \"spectating\") {\n                setStatus(\"You are spectating this game\");\n            } else if (status === \"waiting\") {\n                setStatus(\"Waiting for opponent...\");\n            } else if (status === \"in_progress\") {\n                setStatus(\"Game in progress\");\n            }\n        });\n        // Listen for move acceptance (for moves made by this client)\n        socket.on(\"move_accepted\", (param)=>{\n            let { from, to, gameState } = param;\n            console.log(\"Move accepted by server:\");\n            console.log(\"From:\", from);\n            console.log(\"To:\", to);\n            console.log(\"Game state:\", gameState);\n            // Clear pending move since it was accepted\n            setPendingMove(null);\n            if (!gameState) {\n                console.error(\"No game state received with move acceptance\");\n                socket.emit(\"request_game_state\", roomId);\n                return;\n            }\n            try {\n                const newGame = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess();\n                newGame.load(gameState);\n                console.log(\"Successfully updated game state after move acceptance\");\n                console.log(\"New game FEN:\", newGame.fen());\n                setGame(newGame);\n            } catch (error) {\n                console.error(\"Failed to load game state from server:\", gameState);\n                socket.emit(\"request_game_state\", roomId);\n                return;\n            }\n        });\n        // Listen for opponent's moves\n        socket.on(\"move\", (param)=>{\n            let { from, to, gameState, playerId } = param;\n            console.log(\"Received opponent move:\");\n            console.log(\"From:\", from);\n            console.log(\"To:\", to);\n            console.log(\"Game state:\", gameState);\n            console.log(\"Player ID:\", playerId);\n            if (!gameState) {\n                console.error(\"No game state received with opponent move\");\n                socket.emit(\"request_game_state\", roomId);\n                return;\n            }\n            try {\n                const newGame = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess();\n                newGame.load(gameState);\n                console.log(\"Successfully updated game state from opponent move\");\n                console.log(\"New game FEN:\", newGame.fen());\n                setGame(newGame);\n            } catch (error) {\n                console.error(\"Error updating game state from opponent move:\", error);\n                socket.emit(\"request_game_state\", roomId);\n            }\n        });\n        // Listen for move errors\n        socket.on(\"move_error\", (param)=>{\n            let { message } = param;\n            console.error(\"Move error:\", message);\n            // Clear pending move since it was rejected\n            setPendingMove(null);\n            socket.emit(\"request_game_state\", roomId);\n        });\n        // Listen for game state updates\n        socket.on(\"game_state\", (gameState)=>{\n            console.log(\"Received game state update:\");\n            console.log(\"New state:\", gameState);\n            console.log(\"Current state:\", game.fen());\n            try {\n                const newGame = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess(gameState);\n                setGame(newGame);\n            } catch (error) {\n                console.error(\"Error updating game state:\", error);\n            }\n        });\n        // Listen for errors\n        socket.on(\"error\", (message)=>{\n            console.error(\"Socket error:\", message);\n            setStatus(\"Error: \".concat(message));\n        });\n        // If not connected, connect now\n        if (!socket.connected) {\n            socket.connect();\n        } else {\n            // If already connected, join the room immediately\n            socket.emit(\"join_game_room\", roomId);\n        }\n        return ()=>{\n            console.log(\"Cleaning up game component\");\n            if (socketRef.current) {\n                console.log(\"Leaving game room:\", roomId);\n                socketRef.current.emit(\"leave_game_room\", roomId);\n                socketRef.current.removeAllListeners();\n            }\n        };\n    }, [\n        roomId\n    ]);\n    // Update game status\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (game.isCheckmate()) {\n            setStatus(\"Checkmate! \".concat(game.turn() === \"w\" ? \"Black\" : \"White\", \" wins!\"));\n        } else if (game.isDraw()) {\n            setStatus(\"Draw!\");\n        } else if (game.isStalemate()) {\n            setStatus(\"Stalemate!\");\n        } else if (game.isCheck()) {\n            setStatus(\"Check! \".concat(game.turn() === \"w\" ? \"White\" : \"Black\", \" to move\"));\n        } else {\n            setStatus(\"\".concat(game.turn() === \"w\" ? \"White\" : \"Black\", \" to move\"));\n        }\n    }, [\n        game\n    ]);\n    function onDrop(sourceSquare, targetSquare) {\n        console.log(\"Attempting move:\");\n        console.log(\"From:\", sourceSquare);\n        console.log(\"To:\", targetSquare);\n        console.log(\"Current turn:\", game.turn());\n        console.log(\"Player color:\", playerColor);\n        console.log(\"Current FEN:\", game.fen());\n        // Only allow moves if it's the player's turn\n        if (game.turn() === \"w\" && playerColor !== \"white\" || game.turn() === \"b\" && playerColor !== \"black\") {\n            console.log(\"Not player's turn\");\n            return false;\n        }\n        try {\n            // Validate the move without updating state\n            const gameCopy = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess(game.fen());\n            const move = gameCopy.move({\n                from: sourceSquare,\n                to: targetSquare,\n                promotion: \"q\"\n            });\n            if (move === null) {\n                console.log(\"Invalid move\");\n                return false;\n            }\n            console.log(\"Move is valid, sending to server\");\n            if (socketRef.current) {\n                const moveData = {\n                    room: roomId,\n                    from: sourceSquare,\n                    to: targetSquare,\n                    gameState: gameCopy.fen(),\n                    playerId: socketRef.current.id\n                };\n                console.log(\"\\nEmitting move:\", moveData);\n                // Set pending move\n                setPendingMove({\n                    from: sourceSquare,\n                    to: targetSquare\n                });\n                // Update local state immediately for better UX\n                setGame(gameCopy);\n                // Send move to server\n                socketRef.current.emit(\"move\", moveData);\n                return true;\n            } else {\n                console.error(\"Socket connection not available\");\n                return false;\n            }\n        } catch (error) {\n            console.error(\"Error validating move:\", error);\n            return false;\n        }\n    }\n    if (!roomId) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().error),\n            children: \"Invalid room ID\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 266,\n            columnNumber: 12\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().gameContainer),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().boardContainer),\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Chessboard, {\n                    id: \"BasicBoard\",\n                    position: game.fen(),\n                    onPieceDrop: onDrop,\n                    boardOrientation: playerColor\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                    lineNumber: 272,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                lineNumber: 271,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().gameInfo),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        children: [\n                            \"Room: \",\n                            roomId\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                        lineNumber: 280,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: [\n                            \"Playing as: \",\n                            playerColor\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                        lineNumber: 281,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().status),\n                        children: status\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                        lineNumber: 282,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                lineNumber: 279,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n        lineNumber: 270,\n        columnNumber: 5\n    }, this);\n}\n_s(GameContent, \"w/oQ8p/yeelFkh+vAbqN3F1j7mg=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams\n    ];\n});\n_c1 = GameContent;\n// Main Game component wrapped in Suspense\nfunction Game() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n        fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: \"Loading game...\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 291,\n            columnNumber: 25\n        }, void 0),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(GameContent, {}, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 292,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n        lineNumber: 291,\n        columnNumber: 5\n    }, this);\n}\n_c2 = Game;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"Chessboard\");\n$RefreshReg$(_c1, \"GameContent\");\n$RefreshReg$(_c2, \"Game\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvKHVzZXIpL2dhbWUvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUU4RDtBQUM3QjtBQUNZO0FBQ0s7QUFDWDtBQUNpQjtBQUV4RCw4Q0FBOEM7QUFDOUMsTUFBTVUsYUFBYUQsd0RBQWFBLENBQzlCLElBQU0sZ1FBQU8sQ0FBb0JFLElBQUksQ0FBQyxDQUFDQztRQUNyQyxNQUFNLEVBQUVGLFVBQVUsRUFBRSxHQUFHRTtRQUN2QixPQUFPRjtJQUNULElBQ0E7SUFDRUcsS0FBSztJQUNMQyxTQUFTLGtCQUNQLDhEQUFDQztZQUFJQyxXQUFXVCxzRUFBbUI7c0JBQUU7Ozs7OztBQUV6QztLQVZJRztBQWFOLDBDQUEwQztBQUNuQyxNQUFNUSxVQUFVLGdCQUFnQjtBQUV2QyxrREFBa0Q7QUFDbEQsU0FBU0M7O0lBR1AsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUduQiwrQ0FBUUEsQ0FBUSxJQUFJRSwyQ0FBS0E7SUFDakQsOEVBQThFO0lBQzlFLE1BQU0sQ0FBQ2tCLFFBQVFDLFVBQVUsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQ3NCLGFBQWFDLGVBQWUsR0FBR3ZCLCtDQUFRQSxDQUFzQztJQUNwRixNQUFNd0IsWUFBWXpCLDZDQUFNQSxDQUFNO0lBQzlCLE1BQU0wQixlQUFlckIsZ0VBQWVBO0lBQ3BDLE1BQU1zQixTQUFTRCxhQUFhRSxHQUFHLENBQUM7SUFDaEMsTUFBTUMsY0FBY0gsYUFBYUUsR0FBRyxDQUFDO0lBRXJDN0IsZ0RBQVNBLENBQUM7UUFDUixJQUFJLENBQUM0QixRQUFRO1FBRWIscUNBQXFDO1FBQ3JDLE1BQU1HLFNBQVMxQiwwREFBYUE7UUFDNUJxQixVQUFVTSxPQUFPLEdBQUdEO1FBRXBCLGdDQUFnQztRQUNoQ0EsT0FBT0Usa0JBQWtCO1FBRXpCLDJCQUEyQjtRQUMzQkYsT0FBT0csRUFBRSxDQUFDLFdBQVc7WUFDbkJDLFFBQVFDLEdBQUcs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Q3RFLDJDQUFRQTtRQUFDdUUsd0JBQVUsOERBQUMzRDtzQkFBSTs7Ozs7O2tCQUN2Qiw0RUFBQ0k7Ozs7Ozs7Ozs7QUFHUDtNQU53QnNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvKHVzZXIpL2dhbWUvcGFnZS50c3g/MzRmNyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgU3VzcGVuc2UgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGVzcyB9IGZyb20gJ2NoZXNzLmpzJztcbmltcG9ydCB7IGNvbm5lY3RTb2NrZXQgfSBmcm9tICdAL2xpYi9zb2NrZXQnO1xuaW1wb3J0IHsgdXNlU2VhcmNoUGFyYW1zIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9nYW1lLm1vZHVsZS5jc3MnO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBkeW5hbWljSW1wb3J0IH0gZnJvbSAnbmV4dC9keW5hbWljJztcblxuLy8gSW1wb3J0IHRoZSBDaGVzc2JvYXJkIGNvbXBvbmVudCB3aXRoIG5vIFNTUlxuY29uc3QgQ2hlc3Nib2FyZCA9IGR5bmFtaWNJbXBvcnQoXG4gICgpID0+IGltcG9ydCgncmVhY3QtY2hlc3Nib2FyZCcpLnRoZW4oKG1vZCkgPT4ge1xuICAgIGNvbnN0IHsgQ2hlc3Nib2FyZCB9ID0gbW9kO1xuICAgIHJldHVybiBDaGVzc2JvYXJkO1xuICB9KSxcbiAge1xuICAgIHNzcjogZmFsc2UsXG4gICAgbG9hZGluZzogKCkgPT4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sb2FkaW5nQm9hcmR9PkxvYWRpbmcgQ2hlc3MgQm9hcmQuLi48L2Rpdj5cbiAgICApLFxuICB9XG4pO1xuXG4vLyBQcmV2ZW50IHN0YXRpYyBnZW5lcmF0aW9uIGZvciB0aGlzIHBhZ2VcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuXG4vLyBHYW1lQ29udGVudCBjb21wb25lbnQgdGhhdCB1c2VzIHVzZVNlYXJjaFBhcmFtc1xuZnVuY3Rpb24gR2FtZUNvbnRlbnQoKSB7XG5cblxuICBjb25zdCBbZ2FtZSwgc2V0R2FtZV0gPSB1c2VTdGF0ZTxDaGVzcz4obmV3IENoZXNzKCkpO1xuICAvLyBjb25zdCBbcGxheWVyQ29sb3IsIHNldFBsYXllckNvbG9yXSA9IHVzZVN0YXRlPCd3aGl0ZScgfCAnYmxhY2snPignd2hpdGUnKTtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3BlbmRpbmdNb3ZlLCBzZXRQZW5kaW5nTW92ZV0gPSB1c2VTdGF0ZTx7IGZyb206IHN0cmluZzsgdG86IHN0cmluZyB9IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHNvY2tldFJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSB1c2VTZWFyY2hQYXJhbXMoKTtcbiAgY29uc3Qgcm9vbUlkID0gc2VhcmNoUGFyYW1zLmdldCgncm9vbUlkJyk7XG4gIGNvbnN0IHBsYXllckNvbG9yID0gc2VhcmNoUGFyYW1zLmdldCgnY29sb3InKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghcm9vbUlkKSByZXR1cm47XG5cbiAgICAvLyBHZXQgdGhlIGV4aXN0aW5nIHNvY2tldCBjb25uZWN0aW9uXG4gICAgY29uc3Qgc29ja2V0ID0gY29ubmVjdFNvY2tldCgpO1xuICAgIHNvY2tldFJlZi5jdXJyZW50ID0gc29ja2V0O1xuXG4gICAgLy8gUmVtb3ZlIGFueSBleGlzdGluZyBsaXN0ZW5lcnNcbiAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cbiAgICAvLyBIYW5kbGUgY29ubmVjdGlvbiBldmVudHNcbiAgICBzb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIGdhbWUgc29ja2V0Jyk7XG4gICAgICBzb2NrZXQuZW1pdCgnam9pbl9nYW1lX3Jvb20nLCByb29tSWQpO1xuICAgICAgY29uc29sZS5sb2coJ0pvaW5pbmcgZ2FtZSByb29tOicsIHJvb21JZCk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnRGlzY29ubmVjdGVkIGZyb20gZ2FtZSBzb2NrZXQnKTtcbiAgICAgIHNldFN0YXR1cygnRGlzY29ubmVjdGVkLiBSZWNvbm5lY3RpbmcuLi4nKTtcbiAgICB9KTtcblxuICAgIHNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignQ29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICBzZXRTdGF0dXMoJ0Nvbm5lY3Rpb24gZXJyb3IuIFJldHJ5aW5nLi4uJyk7XG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHBsYXllciBjb2xvciBhc3NpZ25tZW50XG4gICAgLy8gc29ja2V0Lm9uKCdwbGF5ZXJfY29sb3InLCAoY29sb3I6ICd3aGl0ZScgfCAnYmxhY2snKSA9PiB7XG4gICAgLy8gICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcGxheWVyIGNvbG9yOicsIGNvbG9yKTtcbiAgICAvLyAgIHNldFBsYXllckNvbG9yKGNvbG9yKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIExpc3RlbiBmb3IgZ2FtZSBzdGF0dXMgdXBkYXRlc1xuICAgIHNvY2tldC5vbignZ2FtZV9zdGF0dXMnLCAoeyBzdGF0dXMsIHdoaXRlLCBibGFjayB9KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnR2FtZSBzdGF0dXMgdXBkYXRlOicsIHsgc3RhdHVzLCB3aGl0ZSwgYmxhY2sgfSk7XG4gICAgICBcbiAgICAgIGlmIChzdGF0dXMgPT09ICdzcGVjdGF0aW5nJykge1xuICAgICAgICBzZXRTdGF0dXMoJ1lvdSBhcmUgc3BlY3RhdGluZyB0aGlzIGdhbWUnKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnd2FpdGluZycpIHtcbiAgICAgICAgc2V0U3RhdHVzKCdXYWl0aW5nIGZvciBvcHBvbmVudC4uLicpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdpbl9wcm9ncmVzcycpIHtcbiAgICAgICAgc2V0U3RhdHVzKCdHYW1lIGluIHByb2dyZXNzJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIG1vdmUgYWNjZXB0YW5jZSAoZm9yIG1vdmVzIG1hZGUgYnkgdGhpcyBjbGllbnQpXG4gICAgc29ja2V0Lm9uKCdtb3ZlX2FjY2VwdGVkJywgKHsgZnJvbSwgdG8sIGdhbWVTdGF0ZSB9KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnTW92ZSBhY2NlcHRlZCBieSBzZXJ2ZXI6Jyk7XG4gICAgICBjb25zb2xlLmxvZygnRnJvbTonLCBmcm9tKTtcbiAgICAgIGNvbnNvbGUubG9nKCdUbzonLCB0byk7XG4gICAgICBjb25zb2xlLmxvZygnR2FtZSBzdGF0ZTonLCBnYW1lU3RhdGUpO1xuICAgICAgXG4gICAgICAvLyBDbGVhciBwZW5kaW5nIG1vdmUgc2luY2UgaXQgd2FzIGFjY2VwdGVkXG4gICAgICBzZXRQZW5kaW5nTW92ZShudWxsKTtcbiAgICAgIFxuICAgICAgaWYgKCFnYW1lU3RhdGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTm8gZ2FtZSBzdGF0ZSByZWNlaXZlZCB3aXRoIG1vdmUgYWNjZXB0YW5jZScpO1xuICAgICAgICBzb2NrZXQuZW1pdCgncmVxdWVzdF9nYW1lX3N0YXRlJywgcm9vbUlkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXdHYW1lID0gbmV3IENoZXNzKCk7XG4gICAgICAgIG5ld0dhbWUubG9hZChnYW1lU3RhdGUpO1xuICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgZ2FtZSBzdGF0ZSBhZnRlciBtb3ZlIGFjY2VwdGFuY2UnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldyBnYW1lIEZFTjonLCBuZXdHYW1lLmZlbigpKTtcbiAgICAgICAgc2V0R2FtZShuZXdHYW1lKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGdhbWUgc3RhdGUgZnJvbSBzZXJ2ZXI6JywgZ2FtZVN0YXRlKTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3JlcXVlc3RfZ2FtZV9zdGF0ZScsIHJvb21JZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiBmb3Igb3Bwb25lbnQncyBtb3Zlc1xuICAgIHNvY2tldC5vbignbW92ZScsICh7IGZyb20sIHRvLCBnYW1lU3RhdGUsIHBsYXllcklkIH0pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBvcHBvbmVudCBtb3ZlOicpO1xuICAgICAgY29uc29sZS5sb2coJ0Zyb206JywgZnJvbSk7XG4gICAgICBjb25zb2xlLmxvZygnVG86JywgdG8pO1xuICAgICAgY29uc29sZS5sb2coJ0dhbWUgc3RhdGU6JywgZ2FtZVN0YXRlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdQbGF5ZXIgSUQ6JywgcGxheWVySWQpO1xuICAgICAgXG4gICAgICBpZiAoIWdhbWVTdGF0ZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdObyBnYW1lIHN0YXRlIHJlY2VpdmVkIHdpdGggb3Bwb25lbnQgbW92ZScpO1xuICAgICAgICBzb2NrZXQuZW1pdCgncmVxdWVzdF9nYW1lX3N0YXRlJywgcm9vbUlkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXdHYW1lID0gbmV3IENoZXNzKCk7XG4gICAgICAgIG5ld0dhbWUubG9hZChnYW1lU3RhdGUpO1xuICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgZ2FtZSBzdGF0ZSBmcm9tIG9wcG9uZW50IG1vdmUnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldyBnYW1lIEZFTjonLCBuZXdHYW1lLmZlbigpKTtcbiAgICAgICAgc2V0R2FtZShuZXdHYW1lKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGdhbWUgc3RhdGUgZnJvbSBvcHBvbmVudCBtb3ZlOicsIGVycm9yKTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3JlcXVlc3RfZ2FtZV9zdGF0ZScsIHJvb21JZCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIG1vdmUgZXJyb3JzXG4gICAgc29ja2V0Lm9uKCdtb3ZlX2Vycm9yJywgKHsgbWVzc2FnZSB9KSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdNb3ZlIGVycm9yOicsIG1lc3NhZ2UpO1xuICAgICAgLy8gQ2xlYXIgcGVuZGluZyBtb3ZlIHNpbmNlIGl0IHdhcyByZWplY3RlZFxuICAgICAgc2V0UGVuZGluZ01vdmUobnVsbCk7XG4gICAgICBzb2NrZXQuZW1pdCgncmVxdWVzdF9nYW1lX3N0YXRlJywgcm9vbUlkKTtcbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiBmb3IgZ2FtZSBzdGF0ZSB1cGRhdGVzXG4gICAgc29ja2V0Lm9uKCdnYW1lX3N0YXRlJywgKGdhbWVTdGF0ZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgZ2FtZSBzdGF0ZSB1cGRhdGU6Jyk7XG4gICAgICBjb25zb2xlLmxvZygnTmV3IHN0YXRlOicsIGdhbWVTdGF0ZSk7XG4gICAgICBjb25zb2xlLmxvZygnQ3VycmVudCBzdGF0ZTonLCBnYW1lLmZlbigpKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3R2FtZSA9IG5ldyBDaGVzcyhnYW1lU3RhdGUpO1xuICAgICAgICBzZXRHYW1lKG5ld0dhbWUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZ2FtZSBzdGF0ZTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGVycm9yc1xuICAgIHNvY2tldC5vbignZXJyb3InLCAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgZXJyb3I6JywgbWVzc2FnZSk7XG4gICAgICBzZXRTdGF0dXMoYEVycm9yOiAke21lc3NhZ2V9YCk7XG4gICAgfSk7XG5cbiAgICAvLyBJZiBub3QgY29ubmVjdGVkLCBjb25uZWN0IG5vd1xuICAgIGlmICghc29ja2V0LmNvbm5lY3RlZCkge1xuICAgICAgc29ja2V0LmNvbm5lY3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgYWxyZWFkeSBjb25uZWN0ZWQsIGpvaW4gdGhlIHJvb20gaW1tZWRpYXRlbHlcbiAgICAgIHNvY2tldC5lbWl0KCdqb2luX2dhbWVfcm9vbScsIHJvb21JZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdDbGVhbmluZyB1cCBnYW1lIGNvbXBvbmVudCcpO1xuICAgICAgaWYgKHNvY2tldFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdMZWF2aW5nIGdhbWUgcm9vbTonLCByb29tSWQpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdsZWF2ZV9nYW1lX3Jvb20nLCByb29tSWQpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbcm9vbUlkXSk7XG5cbiAgLy8gVXBkYXRlIGdhbWUgc3RhdHVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdhbWUuaXNDaGVja21hdGUoKSkge1xuICAgICAgc2V0U3RhdHVzKGBDaGVja21hdGUhICR7Z2FtZS50dXJuKCkgPT09ICd3JyA/ICdCbGFjaycgOiAnV2hpdGUnfSB3aW5zIWApO1xuICAgIH0gZWxzZSBpZiAoZ2FtZS5pc0RyYXcoKSkge1xuICAgICAgc2V0U3RhdHVzKCdEcmF3IScpO1xuICAgIH0gZWxzZSBpZiAoZ2FtZS5pc1N0YWxlbWF0ZSgpKSB7XG4gICAgICBzZXRTdGF0dXMoJ1N0YWxlbWF0ZSEnKTtcbiAgICB9IGVsc2UgaWYgKGdhbWUuaXNDaGVjaygpKSB7XG4gICAgICBzZXRTdGF0dXMoYENoZWNrISAke2dhbWUudHVybigpID09PSAndycgPyAnV2hpdGUnIDogJ0JsYWNrJ30gdG8gbW92ZWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTdGF0dXMoYCR7Z2FtZS50dXJuKCkgPT09ICd3JyA/ICdXaGl0ZScgOiAnQmxhY2snfSB0byBtb3ZlYCk7XG4gICAgfVxuICB9LCBbZ2FtZV0pO1xuXG4gIGZ1bmN0aW9uIG9uRHJvcChzb3VyY2VTcXVhcmU6IHN0cmluZywgdGFyZ2V0U3F1YXJlOiBzdHJpbmcpIHtcbiAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyBtb3ZlOicpO1xuICAgIGNvbnNvbGUubG9nKCdGcm9tOicsIHNvdXJjZVNxdWFyZSk7XG4gICAgY29uc29sZS5sb2coJ1RvOicsIHRhcmdldFNxdWFyZSk7XG4gICAgY29uc29sZS5sb2coJ0N1cnJlbnQgdHVybjonLCBnYW1lLnR1cm4oKSk7XG4gICAgY29uc29sZS5sb2coJ1BsYXllciBjb2xvcjonLCBwbGF5ZXJDb2xvcik7XG4gICAgY29uc29sZS5sb2coJ0N1cnJlbnQgRkVOOicsIGdhbWUuZmVuKCkpO1xuXG4gICAgLy8gT25seSBhbGxvdyBtb3ZlcyBpZiBpdCdzIHRoZSBwbGF5ZXIncyB0dXJuXG4gICAgaWYgKFxuICAgICAgKGdhbWUudHVybigpID09PSAndycgJiYgcGxheWVyQ29sb3IgIT09ICd3aGl0ZScpIHx8XG4gICAgICAoZ2FtZS50dXJuKCkgPT09ICdiJyAmJiBwbGF5ZXJDb2xvciAhPT0gJ2JsYWNrJylcbiAgICApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdOb3QgcGxheWVyXFwncyB0dXJuJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIHRoZSBtb3ZlIHdpdGhvdXQgdXBkYXRpbmcgc3RhdGVcbiAgICAgIGNvbnN0IGdhbWVDb3B5ID0gbmV3IENoZXNzKGdhbWUuZmVuKCkpO1xuICAgICAgY29uc3QgbW92ZSA9IGdhbWVDb3B5Lm1vdmUoe1xuICAgICAgICBmcm9tOiBzb3VyY2VTcXVhcmUsXG4gICAgICAgIHRvOiB0YXJnZXRTcXVhcmUsXG4gICAgICAgIHByb21vdGlvbjogJ3EnXG4gICAgICB9KTtcblxuICAgICAgaWYgKG1vdmUgPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQgbW92ZScpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdNb3ZlIGlzIHZhbGlkLCBzZW5kaW5nIHRvIHNlcnZlcicpO1xuICAgICAgXG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgbW92ZURhdGEgPSB7XG4gICAgICAgICAgcm9vbTogcm9vbUlkLFxuICAgICAgICAgIGZyb206IHNvdXJjZVNxdWFyZSxcbiAgICAgICAgICB0bzogdGFyZ2V0U3F1YXJlLFxuICAgICAgICAgIGdhbWVTdGF0ZTogZ2FtZUNvcHkuZmVuKCksXG4gICAgICAgICAgcGxheWVySWQ6IHNvY2tldFJlZi5jdXJyZW50LmlkXG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKCdcXG5FbWl0dGluZyBtb3ZlOicsIG1vdmVEYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBwZW5kaW5nIG1vdmVcbiAgICAgICAgc2V0UGVuZGluZ01vdmUoeyBmcm9tOiBzb3VyY2VTcXVhcmUsIHRvOiB0YXJnZXRTcXVhcmUgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGUgaW1tZWRpYXRlbHkgZm9yIGJldHRlciBVWFxuICAgICAgICBzZXRHYW1lKGdhbWVDb3B5KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNlbmQgbW92ZSB0byBzZXJ2ZXJcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnbW92ZScsIG1vdmVEYXRhKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU29ja2V0IGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZhbGlkYXRpbmcgbW92ZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFyb29tSWQpIHtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5lcnJvcn0+SW52YWxpZCByb29tIElEPC9kaXY+O1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmdhbWVDb250YWluZXJ9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5ib2FyZENvbnRhaW5lcn0+XG4gICAgICAgIDxDaGVzc2JvYXJkXG4gICAgICAgICAgaWQ9XCJCYXNpY0JvYXJkXCJcbiAgICAgICAgICBwb3NpdGlvbj17Z2FtZS5mZW4oKX1cbiAgICAgICAgICBvblBpZWNlRHJvcD17b25Ecm9wfVxuICAgICAgICAgIGJvYXJkT3JpZW50YXRpb249e3BsYXllckNvbG9yfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmdhbWVJbmZvfT5cbiAgICAgICAgPGgyPlJvb206IHtyb29tSWR9PC9oMj5cbiAgICAgICAgPHA+UGxheWluZyBhczoge3BsYXllckNvbG9yfTwvcD5cbiAgICAgICAgPHAgY2xhc3NOYW1lPXtzdHlsZXMuc3RhdHVzfT57c3RhdHVzfTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyBNYWluIEdhbWUgY29tcG9uZW50IHdyYXBwZWQgaW4gU3VzcGVuc2VcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdhbWUoKSB7XG4gIHJldHVybiAoXG4gICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PkxvYWRpbmcgZ2FtZS4uLjwvZGl2Pn0+XG4gICAgICA8R2FtZUNvbnRlbnQgLz5cbiAgICA8L1N1c3BlbnNlPlxuICApO1xufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIlN1c3BlbnNlIiwiQ2hlc3MiLCJjb25uZWN0U29ja2V0IiwidXNlU2VhcmNoUGFyYW1zIiwic3R5bGVzIiwiZGVmYXVsdCIsImR5bmFtaWNJbXBvcnQiLCJDaGVzc2JvYXJkIiwidGhlbiIsIm1vZCIsInNzciIsImxvYWRpbmciLCJkaXYiLCJjbGFzc05hbWUiLCJsb2FkaW5nQm9hcmQiLCJkeW5hbWljIiwiR2FtZUNvbnRlbnQiLCJnYW1lIiwic2V0R2FtZSIsInN0YXR1cyIsInNldFN0YXR1cyIsInBlbmRpbmdNb3ZlIiwic2V0UGVuZGluZ01vdmUiLCJzb2NrZXRSZWYiLCJzZWFyY2hQYXJhbXMiLCJyb29tSWQiLCJnZXQiLCJwbGF5ZXJDb2xvciIsInNvY2tldCIsImN1cnJlbnQiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJlbWl0IiwiZXJyb3IiLCJ3aGl0ZSIsImJsYWNrIiwiZnJvbSIsInRvIiwiZ2FtZVN0YXRlIiwibmV3R2FtZSIsImxvYWQiLCJmZW4iLCJwbGF5ZXJJZCIsIm1lc3NhZ2UiLCJjb25uZWN0ZWQiLCJjb25uZWN0IiwiaXNDaGVja21hdGUiLCJ0dXJuIiwiaXNEcmF3IiwiaXNTdGFsZW1hdGUiLCJpc0NoZWNrIiwib25Ecm9wIiwic291cmNlU3F1YXJlIiwidGFyZ2V0U3F1YXJlIiwiZ2FtZUNvcHkiLCJtb3ZlIiwicHJvbW90aW9uIiwibW92ZURhdGEiLCJyb29tIiwiaWQiLCJnYW1lQ29udGFpbmVyIiwiYm9hcmRDb250YWluZXIiLCJwb3NpdGlvbiIsIm9uUGllY2VEcm9wIiwiYm9hcmRPcmllbnRhdGlvbiIsImdhbWVJbmZvIiwiaDIiLCJwIiwiR2FtZSIsImZhbGxiYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/(user)/game/page.tsx\n"));

/***/ })

});