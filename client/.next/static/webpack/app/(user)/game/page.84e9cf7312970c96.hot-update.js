"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(user)/game/page",{

/***/ "(app-pages-browser)/./src/app/(user)/game/page.tsx":
/*!**************************************!*\
  !*** ./src/app/(user)/game/page.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Game; },\n/* harmony export */   dynamic: function() { return /* binding */ dynamic; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var chess_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chess.js */ \"(app-pages-browser)/./node_modules/chess.js/dist/esm/chess.js\");\n/* harmony import */ var _lib_socket__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/socket */ \"(app-pages-browser)/./src/lib/socket.ts\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _game_module_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./game.module.css */ \"(app-pages-browser)/./src/app/(user)/game/game.module.css\");\n/* harmony import */ var _game_module_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_game_module_css__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dynamic */ \"(app-pages-browser)/./node_modules/next/dist/api/app-dynamic.js\");\n/* __next_internal_client_entry_do_not_use__ dynamic,default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Import the Chessboard component with no SSR\nconst Chessboard = (0,next_dynamic__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_react-chessboard_dist_index_esm_js\").then(__webpack_require__.bind(__webpack_require__, /*! react-chessboard */ \"(app-pages-browser)/./node_modules/react-chessboard/dist/index.esm.js\")).then((mod)=>{\n        const { Chessboard } = mod;\n        return Chessboard;\n    }), {\n    ssr: false,\n    loading: ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().loadingBoard),\n            children: \"Loading Chess Board...\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 19,\n            columnNumber: 7\n        }, undefined)\n});\n_c = Chessboard;\n// Prevent static generation for this page\nconst dynamic = \"force-dynamic\";\n// GameContent component that uses useSearchParams\nfunction GameContent() {\n    _s();\n    const [game, setGame] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess());\n    // const [playerColor, setPlayerColor] = useState<'white' | 'black'>('white');\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [pendingMove, setPendingMove] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams)();\n    const roomId = searchParams.get(\"room\");\n    const playerColor = searchParams.get(\"color\");\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!roomId) return;\n        // Get the existing socket connection\n        const socket = (0,_lib_socket__WEBPACK_IMPORTED_MODULE_3__.connectSocket)();\n        socketRef.current = socket;\n        // Remove any existing listeners\n        socket.removeAllListeners();\n        // Handle connection events\n        socket.on(\"connect\", ()=>{\n            console.log(\"Connected to game socket\");\n            socket.emit(\"join_game_room\", roomId);\n            console.log(\"Joining game room:\", roomId);\n        });\n        socket.on(\"disconnect\", ()=>{\n            console.log(\"Disconnected from game socket\");\n            setStatus(\"Disconnected. Reconnecting...\");\n        });\n        socket.on(\"connect_error\", (error)=>{\n            console.error(\"Connection error:\", error);\n            setStatus(\"Connection error. Retrying...\");\n        });\n        // Listen for player color assignment\n        // socket.on('player_color', (color: 'white' | 'black') => {\n        //   console.log('Received player color:', color);\n        //   setPlayerColor(color);\n        // });\n        // Listen for game status updates\n        socket.on(\"game_status\", (param)=>{\n            let { status, white, black } = param;\n            console.log(\"Game status update:\", {\n                status,\n                white,\n                black\n            });\n            if (status === \"spectating\") {\n                setStatus(\"You are spectating this game\");\n            } else if (status === \"waiting\") {\n                setStatus(\"Waiting for opponent...\");\n            } else if (status === \"in_progress\") {\n                setStatus(\"Game in progress\");\n            }\n        });\n        // Listen for move acceptance (for moves made by this client)\n        socket.on(\"move_accepted\", (param)=>{\n            let { from, to, gameState } = param;\n            console.log(\"Move accepted by server:\");\n            console.log(\"From:\", from);\n            console.log(\"To:\", to);\n            console.log(\"Game state:\", gameState);\n            // Clear pending move since it was accepted\n            setPendingMove(null);\n            if (!gameState) {\n                console.error(\"No game state received with move acceptance\");\n                socket.emit(\"request_game_state\", roomId);\n                return;\n            }\n            try {\n                const newGame = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess();\n                newGame.load(gameState);\n                console.log(\"Successfully updated game state after move acceptance\");\n                console.log(\"New game FEN:\", newGame.fen());\n                setGame(newGame);\n            } catch (error) {\n                console.error(\"Failed to load game state from server:\", gameState);\n                socket.emit(\"request_game_state\", roomId);\n                return;\n            }\n        });\n        // Listen for opponent's moves\n        socket.on(\"move\", (param)=>{\n            let { from, to, gameState, playerId } = param;\n            console.log(\"Received opponent move:\");\n            console.log(\"From:\", from);\n            console.log(\"To:\", to);\n            console.log(\"Game state:\", gameState);\n            console.log(\"Player ID:\", playerId);\n            if (!gameState) {\n                console.error(\"No game state received with opponent move\");\n                socket.emit(\"request_game_state\", roomId);\n                return;\n            }\n            try {\n                const newGame = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess();\n                newGame.load(gameState);\n                console.log(\"Successfully updated game state from opponent move\");\n                console.log(\"New game FEN:\", newGame.fen());\n                setGame(newGame);\n            } catch (error) {\n                console.error(\"Error updating game state from opponent move:\", error);\n                socket.emit(\"request_game_state\", roomId);\n            }\n        });\n        // Listen for move errors\n        socket.on(\"move_error\", (param)=>{\n            let { message } = param;\n            console.error(\"Move error:\", message);\n            // Clear pending move since it was rejected\n            setPendingMove(null);\n            socket.emit(\"request_game_state\", roomId);\n        });\n        // Listen for game state updates\n        socket.on(\"game_state\", (gameState)=>{\n            console.log(\"Received game state update:\");\n            console.log(\"New state:\", gameState);\n            console.log(\"Current state:\", game.fen());\n            try {\n                const newGame = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess(gameState);\n                setGame(newGame);\n            } catch (error) {\n                console.error(\"Error updating game state:\", error);\n            }\n        });\n        // Listen for errors\n        socket.on(\"error\", (message)=>{\n            console.error(\"Socket error:\", message);\n            setStatus(\"Error: \".concat(message));\n        });\n        // If not connected, connect now\n        if (!socket.connected) {\n            socket.connect();\n        } else {\n            // If already connected, join the room immediately\n            socket.emit(\"join_game_room\", roomId);\n        }\n        return ()=>{\n            console.log(\"Cleaning up game component\");\n            if (socketRef.current) {\n                console.log(\"Leaving game room:\", roomId);\n                socketRef.current.emit(\"leave_game_room\", roomId);\n                socketRef.current.removeAllListeners();\n            }\n        };\n    }, [\n        roomId\n    ]);\n    // Update game status\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (game.isCheckmate()) {\n            setStatus(\"Checkmate! \".concat(game.turn() === \"w\" ? \"Black\" : \"White\", \" wins!\"));\n        } else if (game.isDraw()) {\n            setStatus(\"Draw!\");\n        } else if (game.isStalemate()) {\n            setStatus(\"Stalemate!\");\n        } else if (game.isCheck()) {\n            setStatus(\"Check! \".concat(game.turn() === \"w\" ? \"White\" : \"Black\", \" to move\"));\n        } else {\n            setStatus(\"\".concat(game.turn() === \"w\" ? \"White\" : \"Black\", \" to move\"));\n        }\n    }, [\n        game\n    ]);\n    function onDrop(sourceSquare, targetSquare) {\n        console.log(\"Attempting move:\");\n        console.log(\"From:\", sourceSquare);\n        console.log(\"To:\", targetSquare);\n        console.log(\"Current turn:\", game.turn());\n        console.log(\"Player color:\", playerColor);\n        console.log(\"Current FEN:\", game.fen());\n        // Only allow moves if it's the player's turn\n        if (game.turn() === \"w\" && playerColor !== \"white\" || game.turn() === \"b\" && playerColor !== \"black\") {\n            console.log(\"Not player's turn\");\n            return false;\n        }\n        try {\n            // Validate the move without updating state\n            const gameCopy = new chess_js__WEBPACK_IMPORTED_MODULE_2__.Chess(game.fen());\n            const move = gameCopy.move({\n                from: sourceSquare,\n                to: targetSquare,\n                promotion: \"q\"\n            });\n            if (move === null) {\n                console.log(\"Invalid move\");\n                return false;\n            }\n            console.log(\"Move is valid, sending to server\");\n            if (socketRef.current) {\n                const moveData = {\n                    room: roomId,\n                    from: sourceSquare,\n                    to: targetSquare,\n                    gameState: gameCopy.fen(),\n                    playerId: socketRef.current.id\n                };\n                console.log(\"\\nEmitting move:\", moveData);\n                // Set pending move\n                setPendingMove({\n                    from: sourceSquare,\n                    to: targetSquare\n                });\n                // Update local state immediately for better UX\n                setGame(gameCopy);\n                // Send move to server\n                socketRef.current.emit(\"move\", moveData);\n                return true;\n            } else {\n                console.error(\"Socket connection not available\");\n                return false;\n            }\n        } catch (error) {\n            console.error(\"Error validating move:\", error);\n            return false;\n        }\n    }\n    if (!roomId) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().error),\n            children: \"Invalid room ID\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 266,\n            columnNumber: 12\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().gameContainer),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().boardContainer),\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Chessboard, {\n                    id: \"BasicBoard\",\n                    position: game.fen(),\n                    onPieceDrop: onDrop,\n                    boardOrientation: playerColor\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                    lineNumber: 272,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                lineNumber: 271,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().gameInfo),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        children: [\n                            \"Room: \",\n                            roomId\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                        lineNumber: 280,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: [\n                            \"Playing as: \",\n                            playerColor\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                        lineNumber: 281,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: (_game_module_css__WEBPACK_IMPORTED_MODULE_5___default().status),\n                        children: status\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                        lineNumber: 282,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n                lineNumber: 279,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n        lineNumber: 270,\n        columnNumber: 5\n    }, this);\n}\n_s(GameContent, \"w/oQ8p/yeelFkh+vAbqN3F1j7mg=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_4__.useSearchParams\n    ];\n});\n_c1 = GameContent;\n// Main Game component wrapped in Suspense\nfunction Game() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n        fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: \"Loading game...\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 291,\n            columnNumber: 25\n        }, void 0),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(GameContent, {}, void 0, false, {\n            fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n            lineNumber: 292,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\artem\\\\YandexDisk\\\\IT\\\\deploy\\\\client\\\\src\\\\app\\\\(user)\\\\game\\\\page.tsx\",\n        lineNumber: 291,\n        columnNumber: 5\n    }, this);\n}\n_c2 = Game;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"Chessboard\");\n$RefreshReg$(_c1, \"GameContent\");\n$RefreshReg$(_c2, \"Game\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvKHVzZXIpL2dhbWUvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUU4RDtBQUM3QjtBQUNZO0FBQ0s7QUFDWDtBQUNpQjtBQUV4RCw4Q0FBOEM7QUFDOUMsTUFBTVUsYUFBYUQsd0RBQWFBLENBQzlCLElBQU0sZ1FBQU8sQ0FBb0JFLElBQUksQ0FBQyxDQUFDQztRQUNyQyxNQUFNLEVBQUVGLFVBQVUsRUFBRSxHQUFHRTtRQUN2QixPQUFPRjtJQUNULElBQ0E7SUFDRUcsS0FBSztJQUNMQyxTQUFTLGtCQUNQLDhEQUFDQztZQUFJQyxXQUFXVCxzRUFBbUI7c0JBQUU7Ozs7OztBQUV6QztLQVZJRztBQWFOLDBDQUEwQztBQUNuQyxNQUFNUSxVQUFVLGdCQUFnQjtBQUV2QyxrREFBa0Q7QUFDbEQsU0FBU0M7O0lBR1AsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUduQiwrQ0FBUUEsQ0FBUSxJQUFJRSwyQ0FBS0E7SUFDakQsOEVBQThFO0lBQzlFLE1BQU0sQ0FBQ2tCLFFBQVFDLFVBQVUsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQ3NCLGFBQWFDLGVBQWUsR0FBR3ZCLCtDQUFRQSxDQUFzQztJQUNwRixNQUFNd0IsWUFBWXpCLDZDQUFNQSxDQUFNO0lBQzlCLE1BQU0wQixlQUFlckIsZ0VBQWVBO0lBQ3BDLE1BQU1zQixTQUFTRCxhQUFhRSxHQUFHLENBQUM7SUFDaEMsTUFBTUMsY0FBY0gsYUFBYUUsR0FBRyxDQUFDO0lBRXJDN0IsZ0RBQVNBLENBQUM7UUFDUixJQUFJLENBQUM0QixRQUFRO1FBRWIscUNBQXFDO1FBQ3JDLE1BQU1HLFNBQVMxQiwwREFBYUE7UUFDNUJxQixVQUFVTSxPQUFPLEdBQUdEO1FBRXBCLGdDQUFnQztRQUNoQ0EsT0FBT0Usa0JBQWtCO1FBRXpCLDJCQUEyQjtRQUMzQkYsT0FBT0csRUFBRSxDQUFDLFdBQVc7WUFDbkJDLFFBQVFDLEdBQUcs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Q3RFLDJDQUFRQTtRQUFDdUUsd0JBQVUsOERBQUMzRDtzQkFBSTs7Ozs7O2tCQUN2Qiw0RUFBQ0k7Ozs7Ozs7Ozs7QUFHUDtNQU53QnNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvKHVzZXIpL2dhbWUvcGFnZS50c3g/MzRmNyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgU3VzcGVuc2UgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGVzcyB9IGZyb20gJ2NoZXNzLmpzJztcbmltcG9ydCB7IGNvbm5lY3RTb2NrZXQgfSBmcm9tICdAL2xpYi9zb2NrZXQnO1xuaW1wb3J0IHsgdXNlU2VhcmNoUGFyYW1zIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9nYW1lLm1vZHVsZS5jc3MnO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBkeW5hbWljSW1wb3J0IH0gZnJvbSAnbmV4dC9keW5hbWljJztcblxuLy8gSW1wb3J0IHRoZSBDaGVzc2JvYXJkIGNvbXBvbmVudCB3aXRoIG5vIFNTUlxuY29uc3QgQ2hlc3Nib2FyZCA9IGR5bmFtaWNJbXBvcnQoXG4gICgpID0+IGltcG9ydCgncmVhY3QtY2hlc3Nib2FyZCcpLnRoZW4oKG1vZCkgPT4ge1xuICAgIGNvbnN0IHsgQ2hlc3Nib2FyZCB9ID0gbW9kO1xuICAgIHJldHVybiBDaGVzc2JvYXJkO1xuICB9KSxcbiAge1xuICAgIHNzcjogZmFsc2UsXG4gICAgbG9hZGluZzogKCkgPT4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5sb2FkaW5nQm9hcmR9PkxvYWRpbmcgQ2hlc3MgQm9hcmQuLi48L2Rpdj5cbiAgICApLFxuICB9XG4pO1xuXG4vLyBQcmV2ZW50IHN0YXRpYyBnZW5lcmF0aW9uIGZvciB0aGlzIHBhZ2VcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuXG4vLyBHYW1lQ29udGVudCBjb21wb25lbnQgdGhhdCB1c2VzIHVzZVNlYXJjaFBhcmFtc1xuZnVuY3Rpb24gR2FtZUNvbnRlbnQoKSB7XG5cblxuICBjb25zdCBbZ2FtZSwgc2V0R2FtZV0gPSB1c2VTdGF0ZTxDaGVzcz4obmV3IENoZXNzKCkpO1xuICAvLyBjb25zdCBbcGxheWVyQ29sb3IsIHNldFBsYXllckNvbG9yXSA9IHVzZVN0YXRlPCd3aGl0ZScgfCAnYmxhY2snPignd2hpdGUnKTtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3BlbmRpbmdNb3ZlLCBzZXRQZW5kaW5nTW92ZV0gPSB1c2VTdGF0ZTx7IGZyb206IHN0cmluZzsgdG86IHN0cmluZyB9IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHNvY2tldFJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSB1c2VTZWFyY2hQYXJhbXMoKTtcbiAgY29uc3Qgcm9vbUlkID0gc2VhcmNoUGFyYW1zLmdldCgncm9vbScpO1xuICBjb25zdCBwbGF5ZXJDb2xvciA9IHNlYXJjaFBhcmFtcy5nZXQoJ2NvbG9yJyk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXJvb21JZCkgcmV0dXJuO1xuXG4gICAgLy8gR2V0IHRoZSBleGlzdGluZyBzb2NrZXQgY29ubmVjdGlvblxuICAgIGNvbnN0IHNvY2tldCA9IGNvbm5lY3RTb2NrZXQoKTtcbiAgICBzb2NrZXRSZWYuY3VycmVudCA9IHNvY2tldDtcblxuICAgIC8vIFJlbW92ZSBhbnkgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuXG4gICAgLy8gSGFuZGxlIGNvbm5lY3Rpb24gZXZlbnRzXG4gICAgc29ja2V0Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBnYW1lIHNvY2tldCcpO1xuICAgICAgc29ja2V0LmVtaXQoJ2pvaW5fZ2FtZV9yb29tJywgcm9vbUlkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdKb2luaW5nIGdhbWUgcm9vbTonLCByb29tSWQpO1xuICAgIH0pO1xuXG4gICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0Rpc2Nvbm5lY3RlZCBmcm9tIGdhbWUgc29ja2V0Jyk7XG4gICAgICBzZXRTdGF0dXMoJ0Rpc2Nvbm5lY3RlZC4gUmVjb25uZWN0aW5nLi4uJyk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oJ2Nvbm5lY3RfZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgc2V0U3RhdHVzKCdDb25uZWN0aW9uIGVycm9yLiBSZXRyeWluZy4uLicpO1xuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIGZvciBwbGF5ZXIgY29sb3IgYXNzaWdubWVudFxuICAgIC8vIHNvY2tldC5vbigncGxheWVyX2NvbG9yJywgKGNvbG9yOiAnd2hpdGUnIHwgJ2JsYWNrJykgPT4ge1xuICAgIC8vICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHBsYXllciBjb2xvcjonLCBjb2xvcik7XG4gICAgLy8gICBzZXRQbGF5ZXJDb2xvcihjb2xvcik7XG4gICAgLy8gfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGdhbWUgc3RhdHVzIHVwZGF0ZXNcbiAgICBzb2NrZXQub24oJ2dhbWVfc3RhdHVzJywgKHsgc3RhdHVzLCB3aGl0ZSwgYmxhY2sgfSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0dhbWUgc3RhdHVzIHVwZGF0ZTonLCB7IHN0YXR1cywgd2hpdGUsIGJsYWNrIH0pO1xuICAgICAgXG4gICAgICBpZiAoc3RhdHVzID09PSAnc3BlY3RhdGluZycpIHtcbiAgICAgICAgc2V0U3RhdHVzKCdZb3UgYXJlIHNwZWN0YXRpbmcgdGhpcyBnYW1lJyk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3dhaXRpbmcnKSB7XG4gICAgICAgIHNldFN0YXR1cygnV2FpdGluZyBmb3Igb3Bwb25lbnQuLi4nKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgIHNldFN0YXR1cygnR2FtZSBpbiBwcm9ncmVzcycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIGZvciBtb3ZlIGFjY2VwdGFuY2UgKGZvciBtb3ZlcyBtYWRlIGJ5IHRoaXMgY2xpZW50KVxuICAgIHNvY2tldC5vbignbW92ZV9hY2NlcHRlZCcsICh7IGZyb20sIHRvLCBnYW1lU3RhdGUgfSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ01vdmUgYWNjZXB0ZWQgYnkgc2VydmVyOicpO1xuICAgICAgY29uc29sZS5sb2coJ0Zyb206JywgZnJvbSk7XG4gICAgICBjb25zb2xlLmxvZygnVG86JywgdG8pO1xuICAgICAgY29uc29sZS5sb2coJ0dhbWUgc3RhdGU6JywgZ2FtZVN0YXRlKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgcGVuZGluZyBtb3ZlIHNpbmNlIGl0IHdhcyBhY2NlcHRlZFxuICAgICAgc2V0UGVuZGluZ01vdmUobnVsbCk7XG4gICAgICBcbiAgICAgIGlmICghZ2FtZVN0YXRlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGdhbWUgc3RhdGUgcmVjZWl2ZWQgd2l0aCBtb3ZlIGFjY2VwdGFuY2UnKTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3JlcXVlc3RfZ2FtZV9zdGF0ZScsIHJvb21JZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3R2FtZSA9IG5ldyBDaGVzcygpO1xuICAgICAgICBuZXdHYW1lLmxvYWQoZ2FtZVN0YXRlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSB1cGRhdGVkIGdhbWUgc3RhdGUgYWZ0ZXIgbW92ZSBhY2NlcHRhbmNlJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdOZXcgZ2FtZSBGRU46JywgbmV3R2FtZS5mZW4oKSk7XG4gICAgICAgIHNldEdhbWUobmV3R2FtZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBnYW1lIHN0YXRlIGZyb20gc2VydmVyOicsIGdhbWVTdGF0ZSk7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXF1ZXN0X2dhbWVfc3RhdGUnLCByb29tSWQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIG9wcG9uZW50J3MgbW92ZXNcbiAgICBzb2NrZXQub24oJ21vdmUnLCAoeyBmcm9tLCB0bywgZ2FtZVN0YXRlLCBwbGF5ZXJJZCB9KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgb3Bwb25lbnQgbW92ZTonKTtcbiAgICAgIGNvbnNvbGUubG9nKCdGcm9tOicsIGZyb20pO1xuICAgICAgY29uc29sZS5sb2coJ1RvOicsIHRvKTtcbiAgICAgIGNvbnNvbGUubG9nKCdHYW1lIHN0YXRlOicsIGdhbWVTdGF0ZSk7XG4gICAgICBjb25zb2xlLmxvZygnUGxheWVyIElEOicsIHBsYXllcklkKTtcbiAgICAgIFxuICAgICAgaWYgKCFnYW1lU3RhdGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTm8gZ2FtZSBzdGF0ZSByZWNlaXZlZCB3aXRoIG9wcG9uZW50IG1vdmUnKTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3JlcXVlc3RfZ2FtZV9zdGF0ZScsIHJvb21JZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3R2FtZSA9IG5ldyBDaGVzcygpO1xuICAgICAgICBuZXdHYW1lLmxvYWQoZ2FtZVN0YXRlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSB1cGRhdGVkIGdhbWUgc3RhdGUgZnJvbSBvcHBvbmVudCBtb3ZlJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdOZXcgZ2FtZSBGRU46JywgbmV3R2FtZS5mZW4oKSk7XG4gICAgICAgIHNldEdhbWUobmV3R2FtZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBnYW1lIHN0YXRlIGZyb20gb3Bwb25lbnQgbW92ZTonLCBlcnJvcik7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXF1ZXN0X2dhbWVfc3RhdGUnLCByb29tSWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIGZvciBtb3ZlIGVycm9yc1xuICAgIHNvY2tldC5vbignbW92ZV9lcnJvcicsICh7IG1lc3NhZ2UgfSkgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignTW92ZSBlcnJvcjonLCBtZXNzYWdlKTtcbiAgICAgIC8vIENsZWFyIHBlbmRpbmcgbW92ZSBzaW5jZSBpdCB3YXMgcmVqZWN0ZWRcbiAgICAgIHNldFBlbmRpbmdNb3ZlKG51bGwpO1xuICAgICAgc29ja2V0LmVtaXQoJ3JlcXVlc3RfZ2FtZV9zdGF0ZScsIHJvb21JZCk7XG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGdhbWUgc3RhdGUgdXBkYXRlc1xuICAgIHNvY2tldC5vbignZ2FtZV9zdGF0ZScsIChnYW1lU3RhdGU6IHN0cmluZykgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIGdhbWUgc3RhdGUgdXBkYXRlOicpO1xuICAgICAgY29uc29sZS5sb2coJ05ldyBzdGF0ZTonLCBnYW1lU3RhdGUpO1xuICAgICAgY29uc29sZS5sb2coJ0N1cnJlbnQgc3RhdGU6JywgZ2FtZS5mZW4oKSk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld0dhbWUgPSBuZXcgQ2hlc3MoZ2FtZVN0YXRlKTtcbiAgICAgICAgc2V0R2FtZShuZXdHYW1lKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGdhbWUgc3RhdGU6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIGZvciBlcnJvcnNcbiAgICBzb2NrZXQub24oJ2Vycm9yJywgKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignU29ja2V0IGVycm9yOicsIG1lc3NhZ2UpO1xuICAgICAgc2V0U3RhdHVzKGBFcnJvcjogJHttZXNzYWdlfWApO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgbm90IGNvbm5lY3RlZCwgY29ubmVjdCBub3dcbiAgICBpZiAoIXNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgIHNvY2tldC5jb25uZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGFscmVhZHkgY29ubmVjdGVkLCBqb2luIHRoZSByb29tIGltbWVkaWF0ZWx5XG4gICAgICBzb2NrZXQuZW1pdCgnam9pbl9nYW1lX3Jvb20nLCByb29tSWQpO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnQ2xlYW5pbmcgdXAgZ2FtZSBjb21wb25lbnQnKTtcbiAgICAgIGlmIChzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTGVhdmluZyBnYW1lIHJvb206Jywgcm9vbUlkKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnbGVhdmVfZ2FtZV9yb29tJywgcm9vbUlkKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3Jvb21JZF0pO1xuXG4gIC8vIFVwZGF0ZSBnYW1lIHN0YXR1c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChnYW1lLmlzQ2hlY2ttYXRlKCkpIHtcbiAgICAgIHNldFN0YXR1cyhgQ2hlY2ttYXRlISAke2dhbWUudHVybigpID09PSAndycgPyAnQmxhY2snIDogJ1doaXRlJ30gd2lucyFgKTtcbiAgICB9IGVsc2UgaWYgKGdhbWUuaXNEcmF3KCkpIHtcbiAgICAgIHNldFN0YXR1cygnRHJhdyEnKTtcbiAgICB9IGVsc2UgaWYgKGdhbWUuaXNTdGFsZW1hdGUoKSkge1xuICAgICAgc2V0U3RhdHVzKCdTdGFsZW1hdGUhJyk7XG4gICAgfSBlbHNlIGlmIChnYW1lLmlzQ2hlY2soKSkge1xuICAgICAgc2V0U3RhdHVzKGBDaGVjayEgJHtnYW1lLnR1cm4oKSA9PT0gJ3cnID8gJ1doaXRlJyA6ICdCbGFjayd9IHRvIG1vdmVgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U3RhdHVzKGAke2dhbWUudHVybigpID09PSAndycgPyAnV2hpdGUnIDogJ0JsYWNrJ30gdG8gbW92ZWApO1xuICAgIH1cbiAgfSwgW2dhbWVdKTtcblxuICBmdW5jdGlvbiBvbkRyb3Aoc291cmNlU3F1YXJlOiBzdHJpbmcsIHRhcmdldFNxdWFyZTogc3RyaW5nKSB7XG4gICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgbW92ZTonKTtcbiAgICBjb25zb2xlLmxvZygnRnJvbTonLCBzb3VyY2VTcXVhcmUpO1xuICAgIGNvbnNvbGUubG9nKCdUbzonLCB0YXJnZXRTcXVhcmUpO1xuICAgIGNvbnNvbGUubG9nKCdDdXJyZW50IHR1cm46JywgZ2FtZS50dXJuKCkpO1xuICAgIGNvbnNvbGUubG9nKCdQbGF5ZXIgY29sb3I6JywgcGxheWVyQ29sb3IpO1xuICAgIGNvbnNvbGUubG9nKCdDdXJyZW50IEZFTjonLCBnYW1lLmZlbigpKTtcblxuICAgIC8vIE9ubHkgYWxsb3cgbW92ZXMgaWYgaXQncyB0aGUgcGxheWVyJ3MgdHVyblxuICAgIGlmIChcbiAgICAgIChnYW1lLnR1cm4oKSA9PT0gJ3cnICYmIHBsYXllckNvbG9yICE9PSAnd2hpdGUnKSB8fFxuICAgICAgKGdhbWUudHVybigpID09PSAnYicgJiYgcGxheWVyQ29sb3IgIT09ICdibGFjaycpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm90IHBsYXllclxcJ3MgdHVybicpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgbW92ZSB3aXRob3V0IHVwZGF0aW5nIHN0YXRlXG4gICAgICBjb25zdCBnYW1lQ29weSA9IG5ldyBDaGVzcyhnYW1lLmZlbigpKTtcbiAgICAgIGNvbnN0IG1vdmUgPSBnYW1lQ29weS5tb3ZlKHtcbiAgICAgICAgZnJvbTogc291cmNlU3F1YXJlLFxuICAgICAgICB0bzogdGFyZ2V0U3F1YXJlLFxuICAgICAgICBwcm9tb3Rpb246ICdxJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChtb3ZlID09PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIG1vdmUnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnTW92ZSBpcyB2YWxpZCwgc2VuZGluZyB0byBzZXJ2ZXInKTtcbiAgICAgIFxuICAgICAgaWYgKHNvY2tldFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IG1vdmVEYXRhID0ge1xuICAgICAgICAgIHJvb206IHJvb21JZCxcbiAgICAgICAgICBmcm9tOiBzb3VyY2VTcXVhcmUsXG4gICAgICAgICAgdG86IHRhcmdldFNxdWFyZSxcbiAgICAgICAgICBnYW1lU3RhdGU6IGdhbWVDb3B5LmZlbigpLFxuICAgICAgICAgIHBsYXllcklkOiBzb2NrZXRSZWYuY3VycmVudC5pZFxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZygnXFxuRW1pdHRpbmcgbW92ZTonLCBtb3ZlRGF0YSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgcGVuZGluZyBtb3ZlXG4gICAgICAgIHNldFBlbmRpbmdNb3ZlKHsgZnJvbTogc291cmNlU3F1YXJlLCB0bzogdGFyZ2V0U3F1YXJlIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGxvY2FsIHN0YXRlIGltbWVkaWF0ZWx5IGZvciBiZXR0ZXIgVVhcbiAgICAgICAgc2V0R2FtZShnYW1lQ29weSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZW5kIG1vdmUgdG8gc2VydmVyXG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ21vdmUnLCBtb3ZlRGF0YSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvY2tldCBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIG1vdmU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghcm9vbUlkKSB7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuZXJyb3J9PkludmFsaWQgcm9vbSBJRDwvZGl2PjtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5nYW1lQ29udGFpbmVyfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuYm9hcmRDb250YWluZXJ9PlxuICAgICAgICA8Q2hlc3Nib2FyZFxuICAgICAgICAgIGlkPVwiQmFzaWNCb2FyZFwiXG4gICAgICAgICAgcG9zaXRpb249e2dhbWUuZmVuKCl9XG4gICAgICAgICAgb25QaWVjZURyb3A9e29uRHJvcH1cbiAgICAgICAgICBib2FyZE9yaWVudGF0aW9uPXtwbGF5ZXJDb2xvcn1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5nYW1lSW5mb30+XG4gICAgICAgIDxoMj5Sb29tOiB7cm9vbUlkfTwvaDI+XG4gICAgICAgIDxwPlBsYXlpbmcgYXM6IHtwbGF5ZXJDb2xvcn08L3A+XG4gICAgICAgIDxwIGNsYXNzTmFtZT17c3R5bGVzLnN0YXR1c30+e3N0YXR1c308L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLy8gTWFpbiBHYW1lIGNvbXBvbmVudCB3cmFwcGVkIGluIFN1c3BlbnNlXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHYW1lKCkge1xuICByZXR1cm4gKFxuICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5Mb2FkaW5nIGdhbWUuLi48L2Rpdj59PlxuICAgICAgPEdhbWVDb250ZW50IC8+XG4gICAgPC9TdXNwZW5zZT5cbiAgKTtcbn0iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJTdXNwZW5zZSIsIkNoZXNzIiwiY29ubmVjdFNvY2tldCIsInVzZVNlYXJjaFBhcmFtcyIsInN0eWxlcyIsImRlZmF1bHQiLCJkeW5hbWljSW1wb3J0IiwiQ2hlc3Nib2FyZCIsInRoZW4iLCJtb2QiLCJzc3IiLCJsb2FkaW5nIiwiZGl2IiwiY2xhc3NOYW1lIiwibG9hZGluZ0JvYXJkIiwiZHluYW1pYyIsIkdhbWVDb250ZW50IiwiZ2FtZSIsInNldEdhbWUiLCJzdGF0dXMiLCJzZXRTdGF0dXMiLCJwZW5kaW5nTW92ZSIsInNldFBlbmRpbmdNb3ZlIiwic29ja2V0UmVmIiwic2VhcmNoUGFyYW1zIiwicm9vbUlkIiwiZ2V0IiwicGxheWVyQ29sb3IiLCJzb2NrZXQiLCJjdXJyZW50IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib24iLCJjb25zb2xlIiwibG9nIiwiZW1pdCIsImVycm9yIiwid2hpdGUiLCJibGFjayIsImZyb20iLCJ0byIsImdhbWVTdGF0ZSIsIm5ld0dhbWUiLCJsb2FkIiwiZmVuIiwicGxheWVySWQiLCJtZXNzYWdlIiwiY29ubmVjdGVkIiwiY29ubmVjdCIsImlzQ2hlY2ttYXRlIiwidHVybiIsImlzRHJhdyIsImlzU3RhbGVtYXRlIiwiaXNDaGVjayIsIm9uRHJvcCIsInNvdXJjZVNxdWFyZSIsInRhcmdldFNxdWFyZSIsImdhbWVDb3B5IiwibW92ZSIsInByb21vdGlvbiIsIm1vdmVEYXRhIiwicm9vbSIsImlkIiwiZ2FtZUNvbnRhaW5lciIsImJvYXJkQ29udGFpbmVyIiwicG9zaXRpb24iLCJvblBpZWNlRHJvcCIsImJvYXJkT3JpZW50YXRpb24iLCJnYW1lSW5mbyIsImgyIiwicCIsIkdhbWUiLCJmYWxsYmFjayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/(user)/game/page.tsx\n"));

/***/ })

});